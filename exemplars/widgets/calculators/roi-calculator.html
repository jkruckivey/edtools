<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sponsorship ROI Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --color-neutral-50: #fafafa;
            --color-neutral-100: #f5f5f5;
            --color-neutral-200: #e5e5e5;
            --color-neutral-300: #d4d4d4;
            --color-neutral-400: #a3a3a3;
            --color-neutral-500: #737373;
            --color-neutral-600: #525252;
            --color-neutral-700: #404040;
            --color-neutral-800: #262626;
            --color-neutral-900: #171717;
            --color-accent: #6b9085;
            --color-accent-light: #c0d1cd;
            --border-radius: 8px;
            --border-radius-sm: 4px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        *:focus { outline: 2px solid #3182ce; outline-offset: 2px; }
        body { font-family: 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: white; color: var(--color-neutral-800); padding: 1.5rem; line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; }
        .widget-box { background: var(--color-neutral-50); border: 2px solid var(--color-neutral-200); border-radius: var(--border-radius); padding: 1.5rem; }
        .widget-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; }
        .widget-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--color-neutral-800); color: white; padding: 0.375rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase; }
        .widget-badge::before { content: ''; width: 8px; height: 8px; background: var(--color-accent); border-radius: 50%; }
        .widget-title { font-size: 1.25rem; font-weight: 700; color: var(--color-neutral-900); margin-bottom: 0.25rem; }
        .widget-subtitle { font-size: 0.85rem; color: var(--color-neutral-600); margin-bottom: 0.5rem; }
        .widget-disclaimer { font-size: 0.75rem; color: var(--color-neutral-500); font-style: italic; margin-bottom: 1rem; }

        /* Presets */
        .presets { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.25rem; }
        .preset-btn { padding: 0.4rem 0.75rem; background: white; color: var(--color-neutral-700); border: 1px solid var(--color-neutral-300); border-radius: var(--border-radius-sm); font-family: inherit; font-size: 0.75rem; font-weight: 500; cursor: pointer; transition: all 0.2s; }
        .preset-btn:hover { background: var(--color-neutral-100); border-color: var(--color-neutral-400); }
        .preset-btn.active { background: var(--color-neutral-800); color: white; border-color: var(--color-neutral-800); }

        /* Two column layout */
        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 1.25rem; margin-bottom: 1rem; }

        /* Input panel */
        .input-panel { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); padding: 1rem; }
        .panel-label { font-size: 0.75rem; font-weight: 600; color: var(--color-neutral-500); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.75rem; }

        /* Input groups */
        .input-group { margin-bottom: 1rem; }
        .input-group:last-child { margin-bottom: 0; }
        .input-label { display: block; font-size: 0.8rem; font-weight: 500; color: var(--color-neutral-700); margin-bottom: 0.375rem; }
        .input-hint { font-size: 0.7rem; color: var(--color-neutral-500); margin-top: 0.25rem; }
        .input-row { display: flex; align-items: center; gap: 0.75rem; }
        input[type="range"] { flex: 1; height: 6px; background: var(--color-neutral-200); border-radius: 3px; -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; background: var(--color-neutral-700); border-radius: 50%; cursor: pointer; }
        input[type="range"]::-moz-range-thumb { width: 16px; height: 16px; background: var(--color-neutral-700); border-radius: 50%; cursor: pointer; border: none; }
        input[type="number"] { width: 100%; padding: 0.5rem; font-family: inherit; font-size: 0.85rem; color: var(--color-neutral-900); background: white; border: 1px solid var(--color-neutral-300); border-radius: var(--border-radius-sm); }
        .value-badge { min-width: 55px; padding: 0.25rem 0.5rem; background: var(--color-neutral-100); border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); font-size: 0.8rem; font-weight: 600; color: var(--color-neutral-700); text-align: center; }

        /* Results panel */
        .results-panel { background: white; border: 1px solid var(--color-neutral-200); border-left: 3px solid var(--color-accent); border-radius: var(--border-radius-sm); padding: 1rem; }
        .metric-row { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid var(--color-neutral-100); }
        .metric-row:last-child { border-bottom: none; }
        .metric-label { font-size: 0.8rem; color: var(--color-neutral-600); }
        .metric-value { font-size: 0.95rem; font-weight: 700; color: var(--color-neutral-800); }
        .metric-value.highlight { font-size: 1.1rem; color: var(--color-accent); }
        .grade-badge { display: inline-block; padding: 0.2rem 0.5rem; border-radius: var(--border-radius-sm); font-size: 0.7rem; font-weight: 600; margin-left: 0.5rem; }
        .grade-excellent { background: var(--color-accent-light); color: var(--color-neutral-800); }
        .grade-good { background: var(--color-neutral-200); color: var(--color-neutral-800); }
        .grade-fair { background: var(--color-neutral-300); color: var(--color-neutral-800); }
        .grade-poor { background: var(--color-neutral-500); color: white; }

        /* Funnel section */
        .funnel-section { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); padding: 1rem; margin-bottom: 1rem; }
        .chart-container { height: 140px; margin-bottom: 1rem; }

        /* Table */
        .table-section { background: white; border: 1px solid var(--color-neutral-200); border-left: 3px solid var(--color-accent); border-radius: var(--border-radius-sm); padding: 1rem; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; font-size: 0.7rem; font-weight: 600; color: var(--color-neutral-500); text-transform: uppercase; letter-spacing: 0.05em; padding: 0.375rem 0; border-bottom: 1px solid var(--color-neutral-200); }
        td { padding: 0.5rem 0; font-size: 0.8rem; color: var(--color-neutral-700); border-bottom: 1px solid var(--color-neutral-100); }
        tr:last-child td { border-bottom: none; }

        /* Insight section */
        .insight-section { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); padding: 1rem; margin-bottom: 1rem; }
        .insight-text { font-size: 0.85rem; color: var(--color-neutral-600); line-height: 1.5; }

        /* Action row */
        .action-row { display: flex; justify-content: flex-end; gap: 0.5rem; }
        .btn { padding: 0.5rem 1rem; border: none; border-radius: var(--border-radius-sm); font-size: 0.8rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: background 0.2s; }
        .btn-secondary { background: var(--color-neutral-200); color: var(--color-neutral-700); }
        .btn-secondary:hover { background: var(--color-neutral-300); }
        .btn-primary { background: var(--color-neutral-800); color: white; }
        .btn-primary:hover { background: var(--color-neutral-700); }

        /* Responsive */
        @media (max-width: 640px) {
            body { padding: 1rem; }
            .widget-box { padding: 1rem; }
            .two-col { grid-template-columns: 1fr; }
            .presets { gap: 0.375rem; }
        }

        @media (prefers-reduced-motion: reduce) {
            * { transition: none !important; }
        }

        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }

        /* Splash Screen Styles */
        .splash-screen { text-align: center; padding: 2rem 1.5rem; }
        .splash-title { font-size: 1.25rem; font-weight: 700; color: var(--color-neutral-900); margin-bottom: 0.5rem; }
        .splash-subtitle { font-size: 0.9rem; color: var(--color-neutral-600); margin-bottom: 1.5rem; }
        .splash-box { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius); padding: 1.25rem; margin-bottom: 1.5rem; text-align: left; }
        .splash-box-title { font-size: 0.8rem; font-weight: 600; color: var(--color-neutral-700); margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .splash-box ul { list-style: none; padding: 0; margin: 0; }
        .splash-box li { font-size: 0.85rem; color: var(--color-neutral-600); padding: 0.4rem 0; padding-left: 1.25rem; position: relative; line-height: 1.5; }
        .splash-box li::before { content: "•"; position: absolute; left: 0; color: var(--color-neutral-400); }
        .splash-disclaimer { font-size: 0.75rem; color: var(--color-neutral-500); font-style: italic; margin-bottom: 1.5rem; line-height: 1.5; }
        .splash-btn { padding: 0.75rem 2rem; background: var(--color-neutral-800); color: white; border: none; border-radius: 6px; font-family: inherit; font-size: 0.9rem; font-weight: 500; cursor: pointer; transition: background 0.2s; }
        .splash-btn:hover { background: var(--color-neutral-700); }
        .splash-btn:focus { outline: 3px solid var(--color-neutral-900); outline-offset: 2px; }
        .simulator-screen { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="widget-box">
            <!-- Splash Screen -->
            <div class="splash-screen" id="splashScreen">
                <h1 class="splash-title">Sponsorship ROI Calculator</h1>
                <p class="splash-subtitle">Explore the funnel from impressions to revenue</p>

                <div class="splash-box">
                    <div class="splash-box-title">What This Tool Does</div>
                    <ul>
                        <li>Models the conversion funnel: impressions → engagement → purchases → revenue</li>
                        <li>Calculates ROI based on your input assumptions</li>
                        <li>Shows how small changes in engagement or conversion rates affect overall returns</li>
                    </ul>
                </div>

                <div class="splash-box">
                    <div class="splash-box-title">Model Simplifications</div>
                    <ul>
                        <li><strong>Attribution is simplified:</strong> Real sponsorship attribution is notoriously difficult — this model assumes direct paths that rarely exist</li>
                        <li><strong>Preset ROI figures are illustrative:</strong> The "37% ROI" or "180% ROI" presets are plausible scenarios, not actual company data</li>
                        <li><strong>Linear funnel assumed:</strong> Real consumer journeys are nonlinear with multiple touchpoints and delayed effects</li>
                        <li><strong>Brand value not captured:</strong> Long-term brand building effects are outside this model's scope</li>
                    </ul>
                </div>

                <p class="splash-disclaimer">
                    Company names in presets are used for context only. Scenarios are illustrative and do not represent actual proprietary data from these brands. This tool models a plausible narrative of impact, not a verified causal chain.
                </p>

                <button class="splash-btn" onclick="startSimulator()">I Understand — Explore the Model</button>
            </div>

            <!-- Main Simulator (hidden until splash acknowledged) -->
            <div class="simulator-screen" id="simulatorScreen">
            <div class="widget-header">
                <span class="widget-badge">Interactive Tool</span>
            </div>
            <h1 class="widget-title">Sponsorship ROI Calculator</h1>
            <p class="widget-subtitle">Model sponsorship ROI using reach, engagement, and conversion metrics.</p>
            <p class="widget-disclaimer">This simulator illustrates how assumptions shape outcomes. Real-world results vary widely.</p>

            <div class="presets" role="group" aria-label="Preset sponsorship scenarios">
                <button class="preset-btn" onclick="loadPreset('nike')">Athletic Apparel (Nike-style)</button>
                <button class="preset-btn" onclick="loadPreset('redbull')">Energy Drink (Red Bull-style)</button>
                <button class="preset-btn" onclick="loadPreset('gatorade')">Sports Drink (Gatorade-style)</button>
            </div>

            <div class="two-col">
                <div class="input-panel">
                    <div class="panel-label">Sponsorship Inputs</div>

                    <div class="input-group">
                        <label class="input-label" for="investment">Total Investment (Rights + Activation)</label>
                        <div class="input-row">
                            <input type="range" id="investment" min="10" max="500" value="100" step="10" oninput="updateCalculations()">
                            <span class="value-badge" id="investmentValue">$100M</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="impressions">Total Impressions (Millions)</label>
                        <input type="number" id="impressions" value="1000" step="100" oninput="updateCalculations()">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="engagementRate">Engagement Rate</label>
                        <div class="input-row">
                            <input type="range" id="engagementRate" min="1" max="10" value="3" step="0.5" oninput="updateCalculations()">
                            <span class="value-badge" id="engagementValue">3%</span>
                        </div>
                        <p class="input-hint">% who interact (app download, retail visit, social). Industry: 2-8%</p>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="conversionRate">Conversion Rate</label>
                        <div class="input-row">
                            <input type="range" id="conversionRate" min="0.5" max="5.0" value="1.5" step="0.1" oninput="updateCalculations()">
                            <span class="value-badge" id="conversionValue">1.5%</span>
                        </div>
                        <p class="input-hint">% of engaged users who purchase</p>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="avgPurchase">Average Purchase Value</label>
                        <div class="input-row">
                            <input type="range" id="avgPurchase" min="10" max="500" value="75" step="5" oninput="updateCalculations()">
                            <span class="value-badge" id="purchaseValue">$75</span>
                        </div>
                    </div>
                </div>

                <div class="results-panel" role="region" aria-label="ROI results" aria-live="polite">
                    <div class="panel-label">ROI Metrics</div>
                    <div class="metric-row">
                        <span class="metric-label">Direct Revenue</span>
                        <span class="metric-value" id="directRevenue">$0M</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label" title="Direct revenue × 1.5 to account for unmeasured brand effects">Total Attributed Revenue (1.5× multiplier)</span>
                        <span class="metric-value" id="totalRevenue">$0M</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Return on Investment</span>
                        <span class="metric-value highlight" id="roiValue">0%<span id="gradeBadge"></span></span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Payback Period</span>
                        <span class="metric-value" id="paybackPeriod">0 years</span>
                    </div>
                    <div class="metric-row" style="border-top: 1px dashed var(--color-neutral-200); margin-top: 0.5rem; padding-top: 0.75rem;">
                        <span class="metric-label">Attribution Confidence</span>
                        <span class="metric-value" style="font-size: 0.8rem; font-weight: 500; color: var(--color-neutral-500);">Low–Medium (illustrative)</span>
                    </div>
                </div>
            </div>

            <div class="two-col">
                <div class="funnel-section">
                    <div class="panel-label">Attribution Funnel</div>
                    <div class="chart-container">
                        <canvas id="funnelChart" role="img" aria-label="Attribution funnel chart"></canvas>
                    </div>
                </div>

                <div class="table-section">
                    <div class="panel-label">Funnel Breakdown</div>
                    <table role="table">
                        <thead>
                            <tr>
                                <th>Stage</th>
                                <th>Volume</th>
                                <th>Rate</th>
                            </tr>
                        </thead>
                        <tbody id="funnelTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="insight-section">
                <p class="insight-text" id="insightText"></p>
            </div>

            <div class="action-row">
                <button class="btn btn-secondary" onclick="resetCalculator()">Reset</button>
                <button class="btn btn-primary" onclick="exportData()">Export CSV</button>
            </div>
            </div><!-- End simulator-screen -->
        </div>
    </div>

    <script>
        function startSimulator() {
            document.getElementById('splashScreen').style.display = 'none';
            document.getElementById('simulatorScreen').style.display = 'block';
        }

        let funnelChart = null;

        const presets = {
            nike: { investment: 400, impressions: 5000, engagementRate: 4, conversionRate: 1.5, avgPurchase: 120 },
            redbull: { investment: 150, impressions: 2000, engagementRate: 7, conversionRate: 2.5, avgPurchase: 85 },
            gatorade: { investment: 80, impressions: 1200, engagementRate: 5, conversionRate: 2.0, avgPurchase: 65 }
        };

        function loadPreset(type) {
            const preset = presets[type];
            document.getElementById('investment').value = preset.investment;
            document.getElementById('impressions').value = preset.impressions;
            document.getElementById('engagementRate').value = preset.engagementRate;
            document.getElementById('conversionRate').value = preset.conversionRate;
            document.getElementById('avgPurchase').value = preset.avgPurchase;

            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            updateCalculations();
        }

        function updateCalculations() {
            const investment = parseFloat(document.getElementById('investment').value);
            const impressions = parseFloat(document.getElementById('impressions').value) * 1000000;
            const engagementRate = parseFloat(document.getElementById('engagementRate').value) / 100;
            const conversionRate = parseFloat(document.getElementById('conversionRate').value) / 100;
            const avgPurchase = parseFloat(document.getElementById('avgPurchase').value);

            document.getElementById('investmentValue').textContent = `$${investment}M`;
            document.getElementById('engagementValue').textContent = `${document.getElementById('engagementRate').value}%`;
            document.getElementById('conversionValue').textContent = `${document.getElementById('conversionRate').value}%`;
            document.getElementById('purchaseValue').textContent = `$${avgPurchase}`;

            const engaged = impressions * engagementRate;
            const customers = engaged * conversionRate;
            const directRevenue = (customers * avgPurchase) / 1000000;
            // Indirect brand effect multiplier (illustrative): 1.5×
            // Accounts for unmeasured brand lift, word-of-mouth, and delayed effects
            const totalRevenue = directRevenue * 1.5;

            const roi = ((totalRevenue - investment) / investment) * 100;
            const payback = investment / (totalRevenue / 3);

            document.getElementById('directRevenue').textContent = `$${directRevenue.toFixed(1)}M`;
            document.getElementById('totalRevenue').textContent = `$${totalRevenue.toFixed(1)}M`;
            document.getElementById('roiValue').innerHTML = `${roi.toFixed(0)}%<span id="gradeBadge"></span>`;
            document.getElementById('paybackPeriod').textContent = `${payback.toFixed(1)} years`;

            let grade, gradeClass, gradeText;
            if (roi >= 50) {
                grade = 'High return'; gradeClass = 'grade-excellent';
                gradeText = `Under these assumptions, ${roi.toFixed(0)}% ROI exceeds typical benchmark ranges.`;
            } else if (roi >= 20) {
                grade = 'Typical return'; gradeClass = 'grade-good';
                gradeText = `Under these assumptions, ${roi.toFixed(0)}% ROI falls within typical benchmark ranges.`;
            } else if (roi >= 0) {
                grade = 'Low return'; gradeClass = 'grade-fair';
                gradeText = `Under these assumptions, ${roi.toFixed(0)}% ROI is positive but below typical benchmark ranges.`;
            } else {
                grade = 'Negative return'; gradeClass = 'grade-poor';
                gradeText = `Under these assumptions, ${roi.toFixed(0)}% ROI is negative. Adjusting engagement or conversion assumptions would change this scenario.`;
            }

            document.getElementById('gradeBadge').innerHTML = `<span class="grade-badge ${gradeClass}">${grade}</span>`;
            document.getElementById('insightText').textContent = gradeText + (payback < 2 ? ' This scenario suggests relatively fast payback.' : ' This scenario suggests slower payback—sensitive to conversion rate assumptions.');

            updateFunnelChart(impressions, engaged, customers);
            updateFunnelTable(impressions, engaged, customers, engagementRate, conversionRate);
        }

        function updateFunnelChart(impressions, engaged, customers) {
            const ctx = document.getElementById('funnelChart').getContext('2d');
            if (funnelChart) funnelChart.destroy();

            funnelChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Reach', 'Engagement', 'Conversion'],
                    datasets: [{
                        data: [impressions, engaged, customers],
                        backgroundColor: ['rgba(64,64,64,0.8)', 'rgba(115,115,115,0.8)', 'rgba(163,163,163,0.8)'],
                        borderColor: ['#404040', '#737373', '#a3a3a3'],
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { callback: v => v >= 1000000 ? (v/1000000).toFixed(0)+'M' : v >= 1000 ? (v/1000).toFixed(0)+'K' : v },
                            grid: { color: '#e5e5e5' }
                        },
                        y: { grid: { display: false } }
                    }
                }
            });
        }

        function updateFunnelTable(impressions, engaged, customers, engagementRate, conversionRate) {
            const tbody = document.getElementById('funnelTableBody');
            const formatNum = n => n >= 1000000 ? (n/1000000).toFixed(1)+'M' : n >= 1000 ? (n/1000).toFixed(1)+'K' : n.toFixed(0);

            tbody.innerHTML = [
                { name: 'Reach', volume: formatNum(impressions), rate: '100%' },
                { name: 'Engagement', volume: formatNum(engaged), rate: `${(engagementRate*100).toFixed(1)}%` },
                { name: 'Conversion', volume: formatNum(customers), rate: `${(conversionRate*100).toFixed(1)}%` }
            ].map(s => `<tr><td>${s.name}</td><td>${s.volume}</td><td>${s.rate}</td></tr>`).join('');
        }

        function exportData() {
            const rows = [
                'Sponsorship ROI Calculator - Export',
                `Timestamp,${new Date().toISOString()}`,
                '',
                'INPUTS',
                `Investment,$${document.getElementById('investment').value}M`,
                `Impressions,${document.getElementById('impressions').value}M`,
                `Engagement Rate,${document.getElementById('engagementRate').value}%`,
                `Conversion Rate,${document.getElementById('conversionRate').value}%`,
                `Avg Purchase,$${document.getElementById('avgPurchase').value}`,
                '',
                'RESULTS',
                `Direct Revenue,${document.getElementById('directRevenue').textContent}`,
                `Total Revenue,${document.getElementById('totalRevenue').textContent}`,
                `ROI,${document.getElementById('roiValue').textContent.replace(/<[^>]*>/g, '')}`,
                `Payback,${document.getElementById('paybackPeriod').textContent}`,
                '',
                `Insight,${document.getElementById('insightText').textContent}`
            ];

            const blob = new Blob([rows.join('\n')], { type: 'text/csv' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `sponsorship-roi-${Date.now()}.csv`;
            a.click();
            URL.revokeObjectURL(a.href);
        }

        function resetCalculator() {
            document.getElementById('investment').value = 100;
            document.getElementById('impressions').value = 1000;
            document.getElementById('engagementRate').value = 3;
            document.getElementById('conversionRate').value = 1.5;
            document.getElementById('avgPurchase').value = 75;
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            updateCalculations();
        }

        window.addEventListener('DOMContentLoaded', updateCalculations);
    </script>
</body>
</html>
