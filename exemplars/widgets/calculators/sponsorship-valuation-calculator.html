<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sponsorship Valuation Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --color-neutral-50: #fafafa;
            --color-neutral-100: #f5f5f5;
            --color-neutral-200: #e5e5e5;
            --color-neutral-300: #d4d4d4;
            --color-neutral-400: #a3a3a3;
            --color-neutral-500: #737373;
            --color-neutral-600: #525252;
            --color-neutral-700: #404040;
            --color-neutral-800: #262626;
            --color-neutral-900: #171717;
            --color-accent: #6b9085;
            --color-accent-light: #c0d1cd;
            --border-radius: 8px;
            --border-radius-sm: 4px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        *:focus { outline: 2px solid #3182ce; outline-offset: 2px; }
        body { font-family: 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: white; color: var(--color-neutral-800); padding: 1.5rem; line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; }
        .widget-box { background: var(--color-neutral-50); border: 2px solid var(--color-neutral-200); border-radius: var(--border-radius); padding: 1.5rem; }
        .widget-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; }
        .widget-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--color-neutral-800); color: white; padding: 0.375rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase; }
        .widget-badge::before { content: ''; width: 8px; height: 8px; background: var(--color-accent); border-radius: 50%; }
        .widget-title { font-size: 1.25rem; font-weight: 700; color: var(--color-neutral-900); margin-bottom: 0.25rem; }
        .widget-subtitle { font-size: 0.85rem; color: var(--color-neutral-600); margin-bottom: 0.5rem; }
        .widget-disclaimer { font-size: 0.75rem; color: var(--color-neutral-500); font-style: italic; margin-bottom: 1rem; }

        /* Presets */
        .presets { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.25rem; }
        .preset-btn { padding: 0.4rem 0.75rem; background: white; color: var(--color-neutral-700); border: 1px solid var(--color-neutral-300); border-radius: var(--border-radius-sm); font-family: inherit; font-size: 0.75rem; font-weight: 500; cursor: pointer; transition: all 0.2s; }
        .preset-btn:hover { background: var(--color-neutral-100); border-color: var(--color-neutral-400); }
        .preset-btn.active { background: var(--color-neutral-800); color: white; border-color: var(--color-neutral-800); }

        /* Two column layout */
        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 1.25rem; margin-bottom: 1rem; }

        /* Input panel */
        .input-panel { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); padding: 1rem; }
        .panel-label { font-size: 0.75rem; font-weight: 600; color: var(--color-neutral-500); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.75rem; }

        /* Input groups */
        .input-group { margin-bottom: 1rem; }
        .input-group:last-child { margin-bottom: 0; }
        .input-label { display: block; font-size: 0.8rem; font-weight: 500; color: var(--color-neutral-700); margin-bottom: 0.375rem; }
        .input-row { display: flex; align-items: center; gap: 0.75rem; }
        input[type="range"] { flex: 1; height: 6px; background: var(--color-neutral-200); border-radius: 3px; -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; background: var(--color-neutral-700); border-radius: 50%; cursor: pointer; }
        input[type="range"]::-moz-range-thumb { width: 16px; height: 16px; background: var(--color-neutral-700); border-radius: 50%; cursor: pointer; border: none; }
        input[type="number"], select { width: 100%; padding: 0.5rem; font-family: inherit; font-size: 0.85rem; color: var(--color-neutral-900); background: white; border: 1px solid var(--color-neutral-300); border-radius: var(--border-radius-sm); }
        .value-badge { min-width: 55px; padding: 0.25rem 0.5rem; background: var(--color-neutral-100); border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); font-size: 0.8rem; font-weight: 600; color: var(--color-neutral-700); text-align: center; }

        /* Results panel */
        .results-panel { background: white; border: 1px solid var(--color-neutral-200); border-left: 3px solid var(--color-accent); border-radius: var(--border-radius-sm); padding: 1rem; }
        .result-row { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid var(--color-neutral-100); }
        .result-row:last-child { border-bottom: none; }
        .result-label { font-size: 0.8rem; color: var(--color-neutral-600); }
        .result-value { font-size: 0.95rem; font-weight: 700; color: var(--color-neutral-800); }
        .result-value.highlight { font-size: 1.1rem; color: var(--color-accent); }
        .grade-badge { display: inline-block; padding: 0.2rem 0.5rem; border-radius: var(--border-radius-sm); font-size: 0.7rem; font-weight: 600; margin-left: 0.5rem; }
        .grade-excellent { background: var(--color-accent-light); color: var(--color-neutral-800); }
        .grade-good { background: var(--color-neutral-200); color: var(--color-neutral-800); }
        .grade-fair { background: var(--color-neutral-300); color: var(--color-neutral-800); }
        .grade-poor { background: var(--color-neutral-500); color: white; }

        /* Chart section */
        .chart-section { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); padding: 1rem; margin-bottom: 1rem; }
        .chart-title { font-size: 0.8rem; font-weight: 600; color: var(--color-neutral-700); margin-bottom: 0.5rem; text-align: center; }
        .chart-container { height: 160px; }

        /* Insight section */
        .insight-section { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius-sm); padding: 1rem; margin-bottom: 1rem; }
        .insight-text { font-size: 0.85rem; color: var(--color-neutral-600); line-height: 1.5; }

        /* Action row */
        .action-row { display: flex; justify-content: flex-end; gap: 0.5rem; }
        .btn { padding: 0.5rem 1rem; border: none; border-radius: var(--border-radius-sm); font-size: 0.8rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: background 0.2s; }
        .btn-secondary { background: var(--color-neutral-200); color: var(--color-neutral-700); }
        .btn-secondary:hover { background: var(--color-neutral-300); }
        .btn-primary { background: var(--color-neutral-800); color: white; }
        .btn-primary:hover { background: var(--color-neutral-700); }

        /* Responsive */
        @media (max-width: 640px) {
            body { padding: 1rem; }
            .widget-box { padding: 1rem; }
            .two-col { grid-template-columns: 1fr; }
            .presets { gap: 0.375rem; }
        }

        @media (prefers-reduced-motion: reduce) {
            * { transition: none !important; }
        }

        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }

        /* Splash Screen Styles */
        .splash-screen { text-align: center; padding: 2rem 1.5rem; }
        .splash-title { font-size: 1.25rem; font-weight: 700; color: var(--color-neutral-900); margin-bottom: 0.5rem; }
        .splash-subtitle { font-size: 0.9rem; color: var(--color-neutral-600); margin-bottom: 1.5rem; }
        .splash-box { background: white; border: 1px solid var(--color-neutral-200); border-radius: var(--border-radius); padding: 1.25rem; margin-bottom: 1.5rem; text-align: left; }
        .splash-box-title { font-size: 0.8rem; font-weight: 600; color: var(--color-neutral-700); margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .splash-box ul { list-style: none; padding: 0; margin: 0; }
        .splash-box li { font-size: 0.85rem; color: var(--color-neutral-600); padding: 0.4rem 0; padding-left: 1.25rem; position: relative; line-height: 1.5; }
        .splash-box li::before { content: "•"; position: absolute; left: 0; color: var(--color-neutral-400); }
        .splash-disclaimer { font-size: 0.75rem; color: var(--color-neutral-500); font-style: italic; margin-bottom: 1.5rem; line-height: 1.5; }
        .splash-btn { padding: 0.75rem 2rem; background: var(--color-neutral-800); color: white; border: none; border-radius: 6px; font-family: inherit; font-size: 0.9rem; font-weight: 500; cursor: pointer; transition: background 0.2s; }
        .splash-btn:hover { background: var(--color-neutral-700); }
        .splash-btn:focus { outline: 3px solid var(--color-neutral-900); outline-offset: 2px; }
        .simulator-screen { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="widget-box">
            <!-- Splash Screen -->
            <div class="splash-screen" id="splashScreen">
                <h1 class="splash-title">Sponsorship Valuation Calculator</h1>
                <p class="splash-subtitle">Explore how deal parameters affect cost efficiency</p>

                <div class="splash-box">
                    <div class="splash-box-title">What This Tool Does</div>
                    <ul>
                        <li>Calculates CPM (Cost Per Thousand impressions) — a standard industry metric for comparing advertising efficiency</li>
                        <li>Breaks down total impressions by channel: broadcast, stadium, and digital</li>
                        <li>Compares your scenario against illustrative benchmarks</li>
                    </ul>
                </div>

                <div class="splash-box">
                    <div class="splash-box-title">Model Simplifications</div>
                    <ul>
                        <li><strong>All impressions treated equally:</strong> This model counts raw impressions — real-world valuations weight impressions by visibility, duration, and context (broadcast typically valued higher than digital)</li>
                        <li><strong>Impressions ≠ impact:</strong> This tool counts impressions, not engagement quality or conversion — a 2-second logo flash counts the same as a 30-second feature</li>
                        <li><strong>Real deals are more complex:</strong> Actual sponsorship valuation includes intangibles like brand association, hospitality rights, and category exclusivity</li>
                        <li><strong>Benchmarks vary widely:</strong> Super Bowl and social media CPMs shown are illustrative; actual rates depend on targeting, format, and market conditions</li>
                    </ul>
                </div>

                <p class="splash-disclaimer">
                    This tool illustrates how assumptions shape CPM calculations. Use it to build intuition about sponsorship economics, not to make actual pricing decisions.
                </p>

                <button class="splash-btn" onclick="startSimulator()">I Understand — Explore the Calculator</button>
            </div>

            <!-- Main Simulator (hidden until splash acknowledged) -->
            <div class="simulator-screen" id="simulatorScreen">
            <div class="widget-header">
                <span class="widget-badge">Interactive Tool</span>
            </div>
            <h1 class="widget-title">Sponsorship Valuation Calculator</h1>
            <p class="widget-subtitle">Calculate CPM, total impressions, and exposure value for sponsorship deals</p>
            <p class="widget-disclaimer">This simulator illustrates how assumptions shape outcomes. Real-world results vary widely.</p>

            <div class="presets" role="group" aria-label="Preset sponsorship deals">
                <button class="preset-btn" onclick="loadPreset('nfl')">NFL-style Jersey (~$25M)</button>
                <button class="preset-btn" onclick="loadPreset('epl')">EPL-style Shirt (~£50M)</button>
                <button class="preset-btn" onclick="loadPreset('mls')">MLS-style (~$5M)</button>
                <button class="preset-btn" onclick="loadPreset('nba')">NBA-style Court (~$3M)</button>
                <button class="preset-btn" onclick="loadPreset('mlb')">MLB-style Dugout (~$1M)</button>
            </div>

            <div class="two-col">
                <div class="input-panel">
                    <div class="panel-label">Valuation Inputs</div>

                    <div class="input-group">
                        <label class="input-label" for="rightsFee">Rights Fee ($ Millions)</label>
                        <div class="input-row">
                            <input type="range" id="rightsFee" min="1" max="100" value="20" step="1" oninput="updateCalculations()">
                            <span class="value-badge" id="rightsFeeValue">$20M</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="broadcastReach">Broadcast Reach (Avg Viewers)</label>
                        <input type="number" id="broadcastReach" value="1500000" step="100000" oninput="updateCalculations()">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="gamesPerSeason">Games Per Season</label>
                        <select id="gamesPerSeason" onchange="updateCalculations()">
                            <option value="38">38 (EPL/La Liga)</option>
                            <option value="41">41 (NBA home)</option>
                            <option value="82" selected>82 (NBA/NHL)</option>
                            <option value="162">162 (MLB)</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="attendance">Stadium Attendance (Avg)</label>
                        <input type="number" id="attendance" value="18000" step="1000" oninput="updateCalculations()">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="digitalImpressions">Digital Impressions (M/Year)</label>
                        <div class="input-row">
                            <input type="range" id="digitalImpressions" min="10" max="500" value="50" step="10" oninput="updateCalculations()">
                            <span class="value-badge" id="digitalImpressionsValue">50M</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="logoExposure">Logo Exposure (% of Broadcast)</label>
                        <div class="input-row">
                            <input type="range" id="logoExposure" min="5" max="50" value="15" step="1" oninput="updateCalculations()">
                            <span class="value-badge" id="logoExposureValue">15%</span>
                        </div>
                    </div>
                </div>

                <div class="results-panel" role="region" aria-label="Calculated results" aria-live="polite">
                    <div class="panel-label">Valuation Results</div>
                    <div class="result-row">
                        <span class="result-label">Total Impressions</span>
                        <span class="result-value" id="totalImpressions">0M</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Cost Per Thousand (CPM)</span>
                        <span class="result-value highlight" id="cpmValue">$0<span id="gradeBadge"></span></span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Broadcast Value</span>
                        <span class="result-value" id="broadcastValue">$0</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Stadium Value</span>
                        <span class="result-value" id="stadiumValue">$0</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Digital Value</span>
                        <span class="result-value" id="digitalValue">$0</span>
                    </div>
                </div>
            </div>

            <div class="chart-section">
                <div class="chart-title">CPM Benchmark Comparison</div>
                <div class="chart-container">
                    <canvas id="benchmarkChart" role="img" aria-label="CPM benchmark comparison chart"></canvas>
                </div>
            </div>

            <div class="insight-section">
                <p class="insight-text" id="insightText"></p>
            </div>

            <div class="action-row">
                <button class="btn btn-secondary" onclick="resetCalculator()">Reset</button>
                <button class="btn btn-primary" onclick="exportData()">Export CSV</button>
            </div>
            </div><!-- End simulator-screen -->
        </div>
    </div>

    <script>
        function startSimulator() {
            document.getElementById('splashScreen').style.display = 'none';
            document.getElementById('simulatorScreen').style.display = 'block';
        }

        let benchmarkChart = null;

        const presets = {
            nfl: { rightsFee: 25, broadcastReach: 15000000, gamesPerSeason: 82, attendance: 65000, digitalImpressions: 200, logoExposure: 25 },
            epl: { rightsFee: 50, broadcastReach: 1500000, gamesPerSeason: 38, attendance: 60000, digitalImpressions: 150, logoExposure: 30 },
            mls: { rightsFee: 5, broadcastReach: 300000, gamesPerSeason: 38, attendance: 21000, digitalImpressions: 30, logoExposure: 20 },
            nba: { rightsFee: 3, broadcastReach: 1200000, gamesPerSeason: 82, attendance: 18000, digitalImpressions: 75, logoExposure: 10 },
            mlb: { rightsFee: 1, broadcastReach: 800000, gamesPerSeason: 162, attendance: 30000, digitalImpressions: 40, logoExposure: 8 }
        };

        function loadPreset(type) {
            const preset = presets[type];
            document.getElementById('rightsFee').value = preset.rightsFee;
            document.getElementById('broadcastReach').value = preset.broadcastReach;
            document.getElementById('gamesPerSeason').value = preset.gamesPerSeason;
            document.getElementById('attendance').value = preset.attendance;
            document.getElementById('digitalImpressions').value = preset.digitalImpressions;
            document.getElementById('logoExposure').value = preset.logoExposure;

            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            updateCalculations();
        }

        function updateCalculations() {
            const rightsFee = parseFloat(document.getElementById('rightsFee').value);
            const broadcastReach = parseFloat(document.getElementById('broadcastReach').value);
            const gamesPerSeason = parseInt(document.getElementById('gamesPerSeason').value);
            const attendance = parseFloat(document.getElementById('attendance').value);
            const digitalImpressions = parseFloat(document.getElementById('digitalImpressions').value) * 1000000;
            const logoExposure = parseFloat(document.getElementById('logoExposure').value) / 100;

            document.getElementById('rightsFeeValue').textContent = `$${rightsFee}M`;
            document.getElementById('digitalImpressionsValue').textContent = `${document.getElementById('digitalImpressions').value}M`;
            document.getElementById('logoExposureValue').textContent = `${document.getElementById('logoExposure').value}%`;

            // Raw impression counts (unweighted)
            const broadcastImpressions = broadcastReach * gamesPerSeason * logoExposure;
            const attendanceImpressions = attendance * gamesPerSeason;
            const totalImpressions = broadcastImpressions + attendanceImpressions + digitalImpressions;

            // Weighted impressions (closer to real valuations)
            // Broadcast: 1.0x (high attention, long duration)
            // Stadium: 0.3x (limited attention, ambient)
            // Digital: 0.1x (low attention, scroll-past)
            const weightedImpressions = (broadcastImpressions * 1.0) + (attendanceImpressions * 0.3) + (digitalImpressions * 0.1);

            // CPM based on raw impressions (displayed to user)
            const cpm = (rightsFee * 1000000 / totalImpressions) * 1000;
            // Note: A more realistic "weighted CPM" would use weightedImpressions
            // const weightedCpm = (rightsFee * 1000000 / weightedImpressions) * 1000;

            // Calculate value breakdown
            const broadcastPct = broadcastImpressions / totalImpressions;
            const stadiumPct = attendanceImpressions / totalImpressions;
            const digitalPct = digitalImpressions / totalImpressions;

            document.getElementById('totalImpressions').textContent = `${(totalImpressions / 1000000).toFixed(1)}M`;
            document.getElementById('cpmValue').innerHTML = `$${cpm.toFixed(0)}<span id="gradeBadge"></span>`;
            document.getElementById('broadcastValue').textContent = `${(broadcastPct * 100).toFixed(0)}%`;
            document.getElementById('stadiumValue').textContent = `${(stadiumPct * 100).toFixed(0)}%`;
            document.getElementById('digitalValue').textContent = `${(digitalPct * 100).toFixed(0)}%`;

            let grade, gradeClass, gradeText;
            if (cpm < 500) {
                grade = 'Cost-efficient';
                gradeClass = 'grade-excellent';
                gradeText = `At $${cpm.toFixed(0)} CPM, this deal appears cost-efficient on a raw impression basis — below typical sponsorship ranges ($500–1,500). Actual value depends on impression quality and brand fit.`;
            } else if (cpm < 1500) {
                grade = 'Typical';
                gradeClass = 'grade-good';
                gradeText = `At $${cpm.toFixed(0)} CPM, this deal falls within typical premium sponsorship ranges ($500–1,500). Whether it's "good value" depends on factors outside this model.`;
            } else if (cpm < 3000) {
                grade = 'Premium';
                gradeClass = 'grade-fair';
                gradeText = `At $${cpm.toFixed(0)} CPM, this deal is priced at the premium end. This may be justified by exclusivity, brand fit, or high-quality impressions not captured here.`;
            } else {
                grade = 'Very premium';
                gradeClass = 'grade-poor';
                gradeText = `At $${cpm.toFixed(0)} CPM, this deal is priced well above typical ranges. Premium pricing may reflect scarcity, exclusivity, or intangible value not visible in raw impression counts.`;
            }

            document.getElementById('gradeBadge').innerHTML = `<span class="grade-badge ${gradeClass}">${grade}</span>`;
            document.getElementById('insightText').textContent = gradeText;

            updateBenchmarkChart(cpm);
        }

        function updateBenchmarkChart(sponsorshipCPM) {
            const ctx = document.getElementById('benchmarkChart').getContext('2d');
            if (benchmarkChart) benchmarkChart.destroy();

            benchmarkChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Your Deal', 'Super Bowl (30s)', 'Social Media'],
                    datasets: [{
                        label: 'CPM ($)',
                        data: [sponsorshipCPM, 60, 8],
                        backgroundColor: ['rgba(107,144,133,0.8)', 'rgba(163,163,163,0.6)', 'rgba(163,163,163,0.6)'],
                        borderColor: ['#6b9085', '#a3a3a3', '#a3a3a3'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: ctx => `$${ctx.parsed.y.toFixed(0)} CPM` } }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { callback: v => '$' + v } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        function exportData() {
            const rows = [
                'Sponsorship Valuation Calculator - Export',
                `Timestamp,${new Date().toISOString()}`,
                '',
                'INPUTS',
                `Rights Fee,$${document.getElementById('rightsFee').value}M`,
                `Broadcast Reach,${document.getElementById('broadcastReach').value}`,
                `Games Per Season,${document.getElementById('gamesPerSeason').value}`,
                `Attendance,${document.getElementById('attendance').value}`,
                `Digital Impressions,${document.getElementById('digitalImpressions').value}M`,
                `Logo Exposure,${document.getElementById('logoExposure').value}%`,
                '',
                'RESULTS',
                `Total Impressions,${document.getElementById('totalImpressions').textContent}`,
                `CPM,${document.getElementById('cpmValue').textContent.replace(/<[^>]*>/g, '')}`,
                `Insight,${document.getElementById('insightText').textContent}`
            ];

            const blob = new Blob([rows.join('\n')], { type: 'text/csv' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `sponsorship-valuation-${Date.now()}.csv`;
            a.click();
            URL.revokeObjectURL(a.href);
        }

        function resetCalculator() {
            document.getElementById('rightsFee').value = 20;
            document.getElementById('broadcastReach').value = 1500000;
            document.getElementById('gamesPerSeason').value = 82;
            document.getElementById('attendance').value = 18000;
            document.getElementById('digitalImpressions').value = 50;
            document.getElementById('logoExposure').value = 15;
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            updateCalculations();
        }

        window.addEventListener('DOMContentLoaded', updateCalculations);
    </script>
</body>
</html>
